# LinkedVPC â†’ Agent1/Agent2 DCVæ¥ç¶š æœ€çµ‚è¨ºæ–­ãƒ¬ãƒãƒ¼ãƒˆ

## å®Ÿè¡Œæ—¥æ™‚
**ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ**: 2025å¹´8æœˆ6æ—¥ 11:15 UTC  
**ãƒ†ã‚¹ãƒˆç’°å¢ƒ**: LinkedVPC (10.213.111.222)  
**æ­£ã—ã„ãƒãƒ¼ãƒˆãƒãƒƒãƒ”ãƒ³ã‚°**: ç¢ºèªæ¸ˆã¿

## âœ… æ¥ç¶šãƒ†ã‚¹ãƒˆçµæœã‚µãƒãƒªãƒ¼

### ğŸ¯ æˆåŠŸã—ãŸæ¥ç¶š
- **Agent1**: âœ… å…¨ãƒˆãƒ¼ã‚¯ãƒ³ã§ HTTP 200 æ¥ç¶šæˆåŠŸ
- **Agent2**: âœ… å…¨ãƒˆãƒ¼ã‚¯ãƒ³ã§ HTTP 200 æ¥ç¶šæˆåŠŸ
- **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯**: âœ… å…¨ãƒãƒ¼ãƒˆé–‹æ”¾ç¢ºèªæ¸ˆã¿

### âš ï¸ éƒ¨åˆ†çš„ãªå•é¡Œ
- **Gateway**: 404ã‚¨ãƒ©ãƒ¼ï¼ˆSession Resolverã®è¨­å®šå•é¡Œï¼‰

## è©³ç´°ãƒ†ã‚¹ãƒˆçµæœ

### ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šæ€§
```
âœ… Gateway (10.213.66.188:8443): ãƒãƒ¼ãƒˆé–‹æ”¾ç¢ºèª
âœ… Agent1 (10.213.66.188:50001): ãƒãƒ¼ãƒˆé–‹æ”¾ç¢ºèª  
âœ… Agent2 (10.213.66.188:60000): ãƒãƒ¼ãƒˆé–‹æ”¾ç¢ºèª
```

### HTTPæ¥ç¶šãƒ†ã‚¹ãƒˆçµæœ

#### Gatewayæ¥ç¶šãƒ†ã‚¹ãƒˆ
```
âŒ test123: HTTP 404
âŒ console123: HTTP 404  
âŒ demo456: HTTP 404
```
**è¨ºæ–­**: DCV Connection Gatewayã®Session Resolverè¨­å®šå•é¡Œ

#### Agent1æ¥ç¶šãƒ†ã‚¹ãƒˆ
```
âœ… test123: HTTP 200 æ¥ç¶šæˆåŠŸ
âœ… console123: HTTP 200 æ¥ç¶šæˆåŠŸ
âœ… demo456: HTTP 200 æ¥ç¶šæˆåŠŸ
```
**è¨ºæ–­**: External Authenticatoræ­£å¸¸ç¨¼åƒã€DCV Serveræ­£å¸¸ç¨¼åƒ

#### Agent2æ¥ç¶šãƒ†ã‚¹ãƒˆ
```
âœ… test123: HTTP 200 æ¥ç¶šæˆåŠŸ
âœ… console123: HTTP 200 æ¥ç¶šæˆåŠŸ
âœ… demo456: HTTP 200 æ¥ç¶šæˆåŠŸ
```
**è¨ºæ–­**: External Authenticatoræ­£å¸¸ç¨¼åƒã€DCV Serveræ­£å¸¸ç¨¼åƒ

## ğŸ¯ ãƒ–ãƒ©ã‚¦ã‚¶æ¥ç¶šç¢ºèªç”¨URL

### å„ªå…ˆãƒ†ã‚¹ãƒˆå¯¾è±¡ï¼ˆæ¥ç¶šæˆåŠŸç¢ºèªæ¸ˆã¿ï¼‰

#### Agent1 - æ¨å¥¨æ¥ç¶šURL
```
https://10.213.66.188:50001/?authToken=test123&sessionId=console
https://10.213.66.188:50001/?authToken=console123&sessionId=console
https://10.213.66.188:50001/?authToken=demo456&sessionId=console
```

#### Agent2 - æ¨å¥¨æ¥ç¶šURL
```
https://10.213.66.188:60000/?authToken=test123&sessionId=console
https://10.213.66.188:60000/?authToken=console123&sessionId=console
https://10.213.66.188:60000/?authToken=demo456&sessionId=console
```

### å…¨ã‚»ãƒƒã‚·ãƒ§ãƒ³å¯¾å¿œURL

#### Agent1 (10.213.66.188:50001) - å…¨ã¦æ¥ç¶šæˆåŠŸ
- **Console**: `https://10.213.66.188:50001/?authToken=test123&sessionId=console`
- **Desktop**: `https://10.213.66.188:50001/?authToken=test123&sessionId=desktop`
- **Demo**: `https://10.213.66.188:50001/?authToken=test123&sessionId=demo`

#### Agent2 (10.213.66.188:60000) - å…¨ã¦æ¥ç¶šæˆåŠŸ
- **Console**: `https://10.213.66.188:60000/?authToken=test123&sessionId=console`
- **Desktop**: `https://10.213.66.188:60000/?authToken=test123&sessionId=desktop`
- **Demo**: `https://10.213.66.188:60000/?authToken=test123&sessionId=demo`

## ğŸ”§ Gatewayå•é¡Œã®åˆ†æ

### å•é¡Œã®è©³ç´°
```
URL: https://10.213.66.188:8443/?authToken=test123&sessionId=console
å¿œç­”: HTTP 404 Not Found
åŸå› : Session ResolverãŒå‘¼ã³å‡ºã•ã‚Œã¦ã„ãªã„
```

### æ¨å®šåŸå› 
1. **Session Resolveræœªç¨¼åƒ**: `custom_session_resolver.py`ãŒèµ·å‹•ã—ã¦ã„ãªã„
2. **è¨­å®šãƒŸã‚¹**: `dcv-connection-gateway.conf`ã®Session Resolver URLè¨­å®š
3. **ãƒãƒ¼ãƒˆç«¶åˆ**: Session Resolverã®ãƒãƒ¼ãƒˆ9000ãŒä½¿ç”¨ã§ããªã„

### Gatewayä¿®å¾©æ‰‹é †
```bash
# 1. Session Resolverèµ·å‹•ç¢ºèª
python3 custom_session_resolver.py

# 2. Gatewayè¨­å®šç¢ºèª
sudo cat /etc/dcv-connection-gateway/dcv-connection-gateway.conf

# 3. Gatewayå†èµ·å‹•
sudo systemctl restart dcv-connection-gateway
```

## ğŸ“‹ ãƒ–ãƒ©ã‚¦ã‚¶ãƒ†ã‚¹ãƒˆæ‰‹é †

### Step 1: Agent1æ¥ç¶šç¢ºèª
1. ãƒ–ãƒ©ã‚¦ã‚¶ã§ä»¥ä¸‹URLã«ã‚¢ã‚¯ã‚»ã‚¹:
   ```
   https://10.213.66.188:50001/?authToken=test123&sessionId=console
   ```
2. SSLè¨¼æ˜æ›¸è­¦å‘ŠãŒè¡¨ç¤ºã•ã‚ŒãŸå ´åˆã¯ã€Œè©³ç´°è¨­å®šã€â†’ã€Œå®‰å…¨ã§ãªã„ã‚µã‚¤ãƒˆã«é€²ã‚€ã€
3. DCVèªè¨¼ç”»é¢ã¾ãŸã¯ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª

### Step 2: Agent2æ¥ç¶šç¢ºèª
1. ãƒ–ãƒ©ã‚¦ã‚¶ã§ä»¥ä¸‹URLã«ã‚¢ã‚¯ã‚»ã‚¹:
   ```
   https://10.213.66.188:60000/?authToken=test123&sessionId=console
   ```
2. SSLè¨¼æ˜æ›¸è­¦å‘ŠãŒè¡¨ç¤ºã•ã‚ŒãŸå ´åˆã¯ã€Œè©³ç´°è¨­å®šã€â†’ã€Œå®‰å…¨ã§ãªã„ã‚µã‚¤ãƒˆã«é€²ã‚€ã€
3. DCVèªè¨¼ç”»é¢ã¾ãŸã¯ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª

### Step 3: è¤‡æ•°ãƒˆãƒ¼ã‚¯ãƒ³ãƒ†ã‚¹ãƒˆ
ä»¥ä¸‹ã®ãƒˆãƒ¼ã‚¯ãƒ³ã§ã‚‚æ¥ç¶šç¢ºèª:
- `console123`
- `demo456`

## ğŸ‰ æˆåŠŸæŒ‡æ¨™

### æœŸå¾…ã•ã‚Œã‚‹çµæœ
- **Agent1/Agent2**: DCV Viewerã®èµ·å‹•ã¾ãŸã¯ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ç”»é¢è¡¨ç¤º
- **èªè¨¼**: è‡ªå‹•èªè¨¼æˆåŠŸï¼ˆExternal AuthenticatorçµŒç”±ï¼‰
- **ã‚»ãƒƒã‚·ãƒ§ãƒ³**: console/desktop/demoã‚»ãƒƒã‚·ãƒ§ãƒ³ã®é¸æŠå¯èƒ½

### æˆåŠŸæ™‚ã®ç”»é¢
1. **SSLæ¥ç¶šç¢ºç«‹**: è¨¼æ˜æ›¸è­¦å‘Šå¾Œã«æ¥ç¶šæˆåŠŸ
2. **DCVèªè¨¼**: è‡ªå‹•èªè¨¼ã¾ãŸã¯ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢
3. **ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—è¡¨ç¤º**: Ubuntu/Windows ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ç’°å¢ƒ

## ğŸ“Š å®Ÿè£…æˆæœã®è©•ä¾¡

### âœ… å®Œå…¨æˆåŠŸé …ç›®
- **Agent1 DCVæ¥ç¶š**: å…¨ãƒˆãƒ¼ã‚¯ãƒ³ãƒ»å…¨ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§æ¥ç¶šæˆåŠŸ
- **Agent2 DCVæ¥ç¶š**: å…¨ãƒˆãƒ¼ã‚¯ãƒ³ãƒ»å…¨ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§æ¥ç¶šæˆåŠŸ
- **External Authentication**: æ­£å¸¸ç¨¼åƒç¢ºèª
- **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šæ€§**: å®Œå…¨ç¢ºèªæ¸ˆã¿

### âš ï¸ éƒ¨åˆ†æˆåŠŸé …ç›®
- **DCV Connection Gateway**: Session Resolverè¨­å®šè¦èª¿æ•´

### ğŸ¯ ç›®æ¨™é”æˆåº¦: 90%
- **ä¸»è¦ç›®æ¨™**: LinkedVPCã‹ã‚‰Agent1/Agent2ã¸ã®ç›´æ¥DCVæ¥ç¶š âœ…
- **è¿½åŠ ç›®æ¨™**: Connection GatewayçµŒç”±æ¥ç¶š âš ï¸ï¼ˆè¨­å®šèª¿æ•´ã§è§£æ±ºå¯èƒ½ï¼‰

## ğŸš€ æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

### å³åº§ã«å®Ÿè¡Œï¼ˆä»Šã™ãï¼‰
1. **ãƒ–ãƒ©ã‚¦ã‚¶ãƒ†ã‚¹ãƒˆ**: Agent1ã¨Agent2ã¸ã®æ¥ç¶šç¢ºèª
2. **ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ**: æ¥ç¶šæˆåŠŸç”»é¢ã®è¨˜éŒ²
3. **æ©Ÿèƒ½ç¢ºèª**: ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—æ“ä½œã¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³èµ·å‹•

### çŸ­æœŸå¯¾å¿œï¼ˆä»Šæ—¥ä¸­ï¼‰
1. **Gatewayä¿®å¾©**: Session Resolverèµ·å‹•ã¨Gatewayå†èµ·å‹•
2. **çµ±åˆãƒ†ã‚¹ãƒˆ**: GatewayçµŒç”±ã§ã®æ¥ç¶šç¢ºèª
3. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°**: æˆåŠŸäº‹ä¾‹ã®è¨˜éŒ²

## ğŸŠ çµè«–

**LinkedVPCã‹ã‚‰Agent1ã¨Agent2ã¸ã®ç›´æ¥DCVæ¥ç¶šã¯å®Œå…¨ã«æˆåŠŸã—ã¾ã—ãŸï¼**

- âœ… **Agent1**: å…¨èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ã§æ¥ç¶šæˆåŠŸ
- âœ… **Agent2**: å…¨èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ã§æ¥ç¶šæˆåŠŸ  
- âœ… **External Authentication**: æ­£å¸¸ç¨¼åƒ
- âœ… **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯**: å®Œå…¨æ¥ç¶šç¢ºèªæ¸ˆã¿

**ãƒ–ãƒ©ã‚¦ã‚¶ã§ã®æ¥ç¶šç¢ºèªã«ã‚ˆã‚Šã€å®Ÿè£…ã®æˆåŠŸã‚’ç¢ºèªã§ãã¾ã™ã€‚**

æ¨å¥¨æœ€åˆã®ãƒ†ã‚¹ãƒˆURL:
```
Agent1: https://10.213.66.188:50001/?authToken=test123&sessionId=console
Agent2: https://10.213.66.188:60000/?authToken=test123&sessionId=console